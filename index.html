<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>

        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <div id="map" style="height:95%; width: 100%;"></div>

        <script src="jquery.js"></script>
        <script src="googleMap.me.js"></script>




        <script>
            (function(){
                var styles = [{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#46bcec"},{"visibility":"on"}]}];

                var googleMap = google_Map("AIzaSyDkQdWdHJofyWARkL_UrGZbDsnirQTrw3s", "#map", callback, {zoom: 6, styles: styles });

                var tab_localisation = [
                    {
                        desc: "Toulouse",
                        lat: 43.6007,
                        lng: 1.432841
                    },
                    {
                        desc: "Paris",
                        lat: 48.858859,
                        lng: 2.347557,
                        icon: "marker.png"
                    },
                ];


                function callback(gMap) {
                    //                gMap.setMarkers(tab_localisation);
                    gMap.direction("Toulouse, Midi-Pyrénées",
                                   "Montpellier, Langedoc Roussillion",
                                   {
                                        animate: true,
                                        speed: 5, 
                                        followMarker: true,
                                        strokeColor: 'red',
                                        strokeOpacity: 0.5,
                                        strokeWeight: 5,
                                        editable: false,
                                        icon : "http://maps.google.com/mapfiles/ms/micons/blue.png",
                                    }, 
                                   {
                                        travelMode: google.maps.TravelMode.DRIVING,
                                        provideRouteAlternatives : true,
                                        waypoints: [
                                            {
                                                location:"Paris, ile-de-france",
                                                stopover:false
                                            },{
                                                location:"Lyon, Bouche-du-rhone",
                                                stopover:true
                                            }
                                        ],
                                    }
                                  );

                    //                gMap.setZoom(13);
                    //                gMap.setCenter(tab_localisation[0].lat, tab_localisation[0].lng);
                    //                
                    //                gMap.removeMarkers();
                    console.debug(gMap);
                }

            })(jQuery)
        </script>

        <!--
<script>
function initialize() {
var map = new google.maps.Map(document.getElementById("map"), {center: {lat: 51.5087531, lng: -0.1281153}, zoom: 7, mapTypeId: google.maps.MapTypeId.ROADMAP});

getDirections(map);
}

function moveMarker(map, marker, latlng) {
marker.setPosition(latlng);
map.panTo(latlng);
}

function autoRefresh(map, pathCoords) {
var i, route, marker;
alert(map);
route = new google.maps.Polyline({
path: [],
geodesic : true,
strokeColor: '#FF0000',
strokeOpacity: 1.0,
strokeWeight: 2,
editable: false,
map:map
});

marker=new google.maps.Marker({map:map, icon:"http://maps.google.com/mapfiles/ms/micons/blue.png"});

for (i = 0; i < pathCoords.length; i++) {                
setTimeout(function(coords) {
route.getPath().push(coords);
moveMarker(map, marker, coords);
}, 200 * i, pathCoords[i]);
}
}

function getDirections(map) {
var directionsService = new google.maps.DirectionsService();

var request = {
origin: new google.maps.LatLng(51.5087531, -0.1281153),
destination: new google.maps.LatLng(48.8583694, 2.2944796),
travelMode: google.maps.TravelMode.DRIVING
};
directionsService.route(request, function(result, status) {

if (status == google.maps.DirectionsStatus.OK) {

autoRefresh(map, result.routes[0].overview_path);
}
});
}

//google.maps.event.addDomListener(window, 'load', initialize);
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDkQdWdHJofyWARkL_UrGZbDsnirQTrw3s&callback=initialize"
async defer></script>


-->
    </body>
</html>